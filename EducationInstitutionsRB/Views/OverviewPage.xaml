<Page
    x:Class="EducationInstitutionsRB.Views.OverviewPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:EducationInstitutionsRB.Converters"
    mc:Ignorable="d">

    <Page.Resources>
        <converters:EmptyCountToVisibilityConverter x:Key="EmptyCountToVisibilityConverter"/>
    </Page.Resources>

    <ScrollViewer>
        <StackPanel Padding="24" Spacing="24">

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <StackPanel Spacing="8">
                <TextBlock Text="ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ" FontSize="24" FontWeight="SemiBold" 
                           Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                <TextBlock Text="ÐžÐ±Ð·Ð¾Ñ€Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾Ð± Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸ÑÑ… Ð ÐµÑÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¸ Ð‘ÐµÐ»Ð°Ñ€ÑƒÑÑŒ" 
                           FontSize="14" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
            </StackPanel>

            <!-- Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð² ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ°Ñ… -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° 1 - Ð’ÑÐµÐ³Ð¾ ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¹ -->
                <Border Grid.Column="0" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" 
                        CornerRadius="8" Padding="16" Margin="8" Height="120">
                    <StackPanel Spacing="8">
                        <FontIcon Glyph="&#xE8F1;" FontSize="16" Foreground="{ThemeResource SystemAccentColor}"/>
                        <TextBlock x:Name="TotalInstitutionsText" 
                                   FontSize="24" FontWeight="SemiBold" 
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                        <TextBlock Text="Ð’ÑÐµÐ³Ð¾ ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¹" FontSize="12" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° 2 - Ð’ÑÐµÐ³Ð¾ ÑƒÑ‡Ð°Ñ‰Ð¸Ñ…ÑÑ -->
                <Border Grid.Column="1" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" 
                        CornerRadius="8" Padding="16" Margin="8" Height="120">
                    <StackPanel Spacing="8">
                        <FontIcon Glyph="&#xE77B;" FontSize="16" Foreground="{ThemeResource SystemAccentColor}"/>
                        <TextBlock x:Name="TotalStudentsText" 
                                   FontSize="24" FontWeight="SemiBold" 
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                        <TextBlock Text="Ð’ÑÐµÐ³Ð¾ ÑƒÑ‡Ð°Ñ‰Ð¸Ñ…ÑÑ" FontSize="12" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° 3 - ÐŸÐµÐ´Ð°Ð³Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÐ¾ÑÑ‚Ð°Ð² -->
                <Border Grid.Column="2" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" 
                        CornerRadius="8" Padding="16" Margin="8" Height="120">
                    <StackPanel Spacing="8">
                        <FontIcon Glyph="&#xE716;" FontSize="16" Foreground="{ThemeResource SystemAccentColor}"/>
                        <TextBlock x:Name="TotalStaffText" 
                                   FontSize="24" FontWeight="SemiBold" 
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                        <TextBlock Text="ÐŸÐµÐ´Ð°Ð³Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ ÑÐ¾ÑÑ‚Ð°Ð²" FontSize="12" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° 4 - Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ ÑƒÑÐ¿ÐµÐ²Ð°ÐµÐ¼Ð¾ÑÑ‚Ð¸ -->
                <Border Grid.Column="3" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" 
                        CornerRadius="8" Padding="16" Margin="8" Height="120">
                    <StackPanel Spacing="8">
                        <FontIcon Glyph="&#xE734;" FontSize="16" Foreground="{ThemeResource SystemAccentColor}"/>
                        <TextBlock x:Name="SuccessRateText" 
                                   FontSize="24" FontWeight="SemiBold" 
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                        <TextBlock Text="Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ ÑƒÑÐ¿ÐµÐ²Ð°ÐµÐ¼Ð¾ÑÑ‚Ð¸" FontSize="12" 
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ -->
            <StackPanel Spacing="12">
                <TextBlock Text="Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿" FontSize="18" FontWeight="SemiBold" 
                           Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                <Grid ColumnSpacing="12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ -->
                    <Button Grid.Column="0" Content="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ" 
                            x:Name="AddInstitutionButton"
                            Click="AddInstitutionButton_Click"
                            HorizontalAlignment="Stretch"
                            Background="{ThemeResource SystemControlBackgroundAccentBrush}"
                            Foreground="White"
                            BorderThickness="0"
                            CornerRadius="4"
                            Padding="12,8"/>

                    <Button Grid.Column="1" Content="ðŸ“Š Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¾Ñ‚Ñ‡ÐµÑ‚" 
        Click="GenerateReportButton_Click"
        HorizontalAlignment="Stretch"
        Background="{ThemeResource SystemControlBackgroundAccentBrush}"
        Foreground="White"
        BorderThickness="0"
        CornerRadius="4"
        Padding="12,8"/>
                </Grid>
            </StackPanel>

            <!-- ÐÐµÐ´Ð°Ð²Ð½Ð¸Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ -->
            <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" 
                    CornerRadius="8" Padding="16">
                <StackPanel Spacing="16">
                    <TextBlock Text="ÐÐµÐ´Ð°Ð²Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ" 
                               FontSize="18" FontWeight="SemiBold" 
                               Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>

                    <ProgressRing x:Name="LoadingProgress" 
                                  IsActive="True"
                                  HorizontalAlignment="Center" VerticalAlignment="Center"
                                  Width="40" Height="40"/>

                    <ItemsControl x:Name="RecentInstitutionsList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" 
                                        BorderThickness="0,0,0,1" Padding="0,8" 
                                        Margin="0,0,0,4">
                                    <Grid ColumnDefinitions="Auto,*,Auto" 
                                          ColumnSpacing="12"
                                          Padding="8,4">
                                        <FontIcon Grid.Column="0" Glyph="&#xE8F1;" 
                                                  FontSize="12" 
                                                  Foreground="{ThemeResource SystemAccentColor}"
                                                  VerticalAlignment="Center"/>

                                        <StackPanel Grid.Column="1" Spacing="2">
                                            <TextBlock Text="{Binding Name}" 
                                                       FontWeight="SemiBold" 
                                                       FontSize="14"/>
                                            <TextBlock Text="{Binding Type}" 
                                                       FontSize="12" 
                                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                            <TextBlock Text="{Binding District.Region.Name}" 
                                                       FontSize="11" 
                                                       Foreground="{ThemeResource TextFillColorTertiaryBrush}"/>
                                        </StackPanel>

                                        <TextBlock Grid.Column="2" 
                                                   Text="{Binding RegistrationDateDisplay}" 
                                                   FontSize="11" 
                                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                   VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>

                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Spacing="4"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>

                    <!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð³Ð´Ð° Ð½ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… -->
                    <TextBlock x:Name="NoDataText"
                               Text="ÐÐµÑ‚ Ð½ÐµÐ´Ð°Ð²Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ñ… ÑƒÑ‡Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ð¹" 
                               FontSize="14" 
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               HorizontalAlignment="Center"
                               Visibility="Collapsed"/>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</Page>