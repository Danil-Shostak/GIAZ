<Window
    x:Class="EducationInstitutionsRB.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls">

    <Grid x:Name="RootGrid" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <!-- Сплаш-скрин -->
        <Grid x:Name="SplashGrid">
            <Grid.RenderTransform>
                <ScaleTransform x:Name="SplashScale" ScaleX="1" ScaleY="1"/>
            </Grid.RenderTransform>

            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="24">
                <Border Width="120" Height="120" 
                        Background="{ThemeResource SystemControlBackgroundAccentBrush}"
                        CornerRadius="16"
                        HorizontalAlignment="Center">
                    <Viewbox Width="60" Height="60">
                        <FontIcon Glyph="&#xE8F1;" Foreground="White"/>
                    </Viewbox>
                </Border>

                <StackPanel>
                    <TextBlock Text="Образовательные учреждения РБ" 
                              FontSize="28" 
                              FontWeight="SemiBold"
                              HorizontalAlignment="Center"
                              Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                              TextAlignment="Center"/>

                    <TextBlock Text="Загрузка..." 
                              FontSize="16" 
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                              HorizontalAlignment="Center"
                              Margin="0,12,0,0"/>
                </StackPanel>

                <ProgressRing Width="48" Height="48"
                             IsActive="True"
                             HorizontalAlignment="Center"
                             Foreground="{ThemeResource SystemControlForegroundAccentBrush}"/>
            </StackPanel>
        </Grid>

        <!-- Основной интерфейс (изначально скрыт) -->
        <Grid x:Name="MainContentGrid" 
              Visibility="Collapsed" 
              Opacity="0"
              RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <ScaleTransform x:Name="MainContentScale" ScaleX="0.9" ScaleY="0.9"/>
            </Grid.RenderTransform>

            <!-- Кастомный заголовок -->
            <Grid x:Name="CustomTitleBar" 
                  Height="40" 
                  VerticalAlignment="Top"
                  Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Логотип и название -->
                <StackPanel Grid.Column="0" 
                            Orientation="Horizontal" 
                            Spacing="12"
                            Margin="16,0"
                            VerticalAlignment="Center">
                    <Border Background="{ThemeResource SystemAccentColor}"
                            CornerRadius="6"
                            Width="24" Height="24">
                        <TextBlock Text="&#xE8F1;" 
                                  FontFamily="Segoe MDL2 Assets"
                                  FontSize="12"
                                  Foreground="White"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="Образовательные учреждения РБ" 
                              FontSize="13"
                              FontWeight="SemiBold"
                              VerticalAlignment="Center"
                              Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                </StackPanel>

                <!-- Область для перетаскивания -->
                <Grid Grid.Column="1" 
                      Background="Transparent"
                      x:Name="DragRegion"/>

                <!-- Кнопки управления окном -->
                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal"
                            HorizontalAlignment="Right">
                    <Button x:Name="MinimizeButton"
                            Content="&#xE921;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="10"
                            Background="Transparent"
                            BorderThickness="0"
                            Width="40" Height="40"
                            Click="MinimizeButton_Click"/>

                    <Button x:Name="MaximizeButton"
                            Content="&#xE922;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="10"
                            Background="Transparent"
                            BorderThickness="0"
                            Width="40" Height="40"
                            Click="MaximizeButton_Click"/>

                    <Button x:Name="CloseButton"
                            Content="&#xE8BB;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="10"
                            Background="Transparent"
                            BorderThickness="0"
                            Width="40" Height="40"
                            Click="CloseButton_Click"/>
                </StackPanel>
            </Grid>

            <!-- Основной контент -->
            <Grid Margin="0,40,0,0">
                <NavigationView 
                    x:Name="RootNavigation"
                    PaneDisplayMode="LeftCompact"
                    IsBackButtonVisible="Collapsed"
                    IsSettingsVisible="False"
                    OpenPaneLength="240"
                    CompactPaneLength="48"
                    ItemInvoked="RootNavigation_ItemInvoked"
                    Loaded="RootNavigation_Loaded"
                    BackRequested="RootNavigation_BackRequested">

                    <NavigationView.MenuItems>
                        <NavigationViewItem Content="Обзор" Tag="Overview">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE80F;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Учреждения" Tag="Institutions">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE8AF;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Импорт данных" Tag="Import">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE896;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Отчеты" Tag="Reports">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE9D2;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Администрирование" Tag="Admin">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE7EF;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                    </NavigationView.MenuItems>

                    <Frame x:Name="ContentFrame" Background="Transparent"/>
                </NavigationView>
            </Grid>
        </Grid>
    </Grid>
</Window>